a
<script setup>
import {
  SVG,
  extend as SVGextend,
  Element as SVGElement,
} from '@svgdotjs/svg.js';
import { onMounted, computed, ref } from 'vue';
import svg from './assets/vue.svg';
import Session from 'svg-text-to-path';

const data = [
  {
    id: 'mark',
    type: 'svg',
    width: 120,
    content:
      '<svg x="0" y="0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 408" fill="none"><path d="M65.5149 284.943C77.0883 284.445 90.334 282.657 101.198 278.547C111.921 274.49 121.612 267.313 133.71 268.426C147.963 269.736 157.569 279.517 165.722 290.493C182.782 313.458 196.474 349.125 198.734 377.72H199.527C208.271 348.944 214.003 320.497 230.494 294.458C237.609 283.226 248.09 270.371 262.171 268.519C276.061 266.693 286.387 275.179 298.648 279.499C309.916 283.469 323.308 284.242 335.124 285.736V284.943C315.049 267.432 297.493 233.077 291.511 207.232C319.365 200.616 347.513 175.589 361.923 151.724C370.124 138.143 374.437 121.842 366.146 107.318C349.471 78.1081 307.916 63.4002 277.238 55.1016C271.024 53.4207 264.552 51.4201 258.206 50.3781C253.713 49.6401 247.095 49.7121 243.222 47.1646C239.378 44.6357 237.411 39.1044 235.404 35.1574C231.331 27.1507 226.957 19.1805 222.523 11.3684C220.882 8.47758 219.438 3.74753 216.552 1.87478C214.181 0.336028 210.147 1.05979 207.456 1.05979C200.377 1.05979 192.311 -0.0257089 185.336 1.17725C181.171 1.89564 178.949 8.8352 177.14 12.1613C172.537 20.6274 167.93 29.0914 163.293 37.5363C161.457 40.8788 159.654 46.2614 155.83 47.7275C147.555 50.9004 136.894 50.7165 128.159 52.9001C103.611 59.0374 79.4275 68.6342 58.3782 82.7364C47.7395 89.8636 36.7763 99.3324 31.449 111.282C17.4519 142.681 55.0234 178.13 78.2024 192.915C84.6167 197.007 91.2285 200.464 98.0266 203.864C100.494 205.098 105.301 206.477 106.581 209.127C108.74 213.594 101.751 226.035 99.787 230.228C90.315 250.445 77.6862 266.543 65.5149 284.943ZM366.843 122.384H366.05C354.297 97.5387 323.725 83.6284 299.441 74.47C236.658 50.7932 169.223 49.9394 105.956 71.9069C80.4854 80.7508 46.0696 95.7617 33.7961 121.591C31.4359 113.608 41.502 103.561 46.4836 98.5957C63.0876 82.0465 87.1962 72.0722 109.128 64.7616C141.057 54.1186 175.267 47.19 209.042 48.6692C241.318 50.0825 274.099 59.0644 304.198 70.3014C327.286 78.9204 362.771 94.8141 366.843 122.384ZM275.652 162.825C278.686 157.526 284.963 154.385 285.779 147.759C287.657 132.517 260.657 122.199 249.484 118.419L258.574 165.204L262.024 197.716L249.113 223.884L251.07 236.572C234.899 233.687 227.604 215.32 213.007 208.818L214.593 204.06L199.527 214.204L184.46 204.06L186.046 208.818C169.611 213.315 164.574 231.792 147.984 236.572C148.83 230.818 150.588 225.672 148.406 219.919C145.17 211.388 137.098 204.869 136.894 195.337C136.339 169.322 147.657 144.094 148.777 118.419C137.755 121.57 112.32 132.841 113.274 146.966C113.76 154.158 120.368 157.142 123.402 162.825C112.287 160.183 107.628 146.615 113.819 137.45C121.467 126.131 136.868 119.225 149.57 115.48C184.693 105.126 225.652 105.063 259.792 119.552C269.611 123.719 280.542 129.59 286.147 139.036C291.477 148.02 285.671 160.443 275.652 162.825ZM48.8625 139.829C52.0689 145.85 54.0304 152.342 57.8697 158.068C69.2628 175.059 90.7353 192.754 110.714 198.509L109.921 200.888C89.7996 195.091 69.1525 178.779 57.1318 162.032C53.4372 156.885 46.2871 146.443 48.8625 139.829ZM351.777 139.829C349.902 162.777 326.245 180.704 308.163 191.531C302.194 195.106 295.251 199.656 288.339 200.888C290.712 193.941 308.395 188.552 314.507 184.115C324.903 176.568 334.534 167.858 341.913 157.275C345.653 151.909 347.276 144.467 351.777 139.829ZM160.671 169.962V170.755L156.706 172.341C160.096 179.233 168.295 179.133 174.945 178.104C179.496 177.399 184.63 175.886 181.288 170.755C186.003 172.08 196.26 170.411 189.533 163.472C184.037 157.803 166.006 152.997 158.292 153.347C150.515 153.701 143.64 163.645 151.334 169.484C154.006 171.512 157.657 170.343 160.671 169.962ZM207.456 171.548L218.558 169.962V170.755L213.8 172.341C216.206 180.468 228.851 179.496 235.209 177.135C237.534 176.273 241.704 174.074 239.175 171.548C241.98 170.709 245.221 170.838 247.475 168.715C252.553 163.93 249.856 156.824 243.932 154.549C235.163 151.182 224.416 156.117 216.179 159.197C213.596 160.163 209.164 160.977 207.479 163.34C205.893 165.563 207.006 169.12 207.456 171.548ZM227.281 176.306L228.073 171.548L224.902 175.513H223.316C224.027 166.185 234.842 173.52 227.281 176.306ZM171.773 175.513V171.548H170.187L169.394 176.306C160.459 170.495 179.438 170.348 171.773 175.513ZM200.32 231.021C204.889 237.49 211.749 241.114 219.351 242.915V253.224L198.734 241.329C195.718 247.514 186.293 252.049 179.702 253.224L180.518 243.311L198.734 231.021H200.32ZM0.491455 407.06H399.355C378.63 357.214 345.004 315.458 296.269 291.09C287.568 286.74 278.686 281.3 269.308 278.599C264.728 288.237 257.493 297.003 252.199 306.353C235.86 335.21 217.629 372.512 216.179 406.267H182.874C182.838 393.081 177.761 379.031 173.623 366.618C163.021 334.817 147.233 306.938 129.745 278.599C117.26 282.013 105.226 289.323 94.0618 295.71C52.5908 319.435 15.8706 361.226 0.491455 407.06Z" fill="#070709"/></svg>',
  },
  {
    id: 'name',
    type: 'text',
    fontSize: 46,
    fontFamily: 'Mansalva',
    content: 'Wizard',
  },
];

// const a = document.querySelector('.aaa');
// console.log(a);
// let session = new Session(a, {
//   googleApiKey: 'AIzaSyA7_DioSood5zPy7mlIVvxvDnLPWCETL24',
// });
// let stat = await session.replaceAll();
// let out = session.getSvgString();
// console.log(stat, out);

const parser = new DOMParser();
const getSVGProps = (svg) => {
  const { documentElement } = parser.parseFromString(svg, 'image/svg+xml');
  return {
    viewBox: `0 0 ${documentElement.viewBox.baseVal.width} ${documentElement.viewBox.baseVal.height}`,
    innerHTML: documentElement.innerHTML,
  };
};

const logoLayout = ref(null);
const computeLogoLayout1 = async () => {
  const imageBounding = document.getElementById('mark').getBoundingClientRect();
  const textBounding = document.getElementById('name').getBoundingClientRect();

  const logoWidth = Math.max(imageBounding.width, textBounding.width);
  const logoHeight = imageBounding.height + textBounding.height;

  const textX = logoWidth / 2;
  const textY = imageBounding.height;

  const imageY = 0;
  const imageX = (logoWidth - imageBounding.width) / 2;

  logoLayout.value = {
    width: logoWidth,
    height: logoHeight,
    imageX,
    imageY,
    textX,
    textY,
  };
};

onMounted(() => {
  computeLogoLayout1();
});
</script>

<template>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    :width="logoLayout.width"
    :height="logoLayout.height"
    :viewBox="`0 0 ${logoLayout.width} ${logoLayout.height}`"
  >
    <template v-for="element in data" :key="element.id">
      <svg
        v-if="element.type === 'svg'"
        ref="image"
        :viewBox="getSVGProps(graphic.content).viewBox"
        width="120"
        height="120"
        v-html="getSVGProps(graphic.content).innerHTML"
      ></svg>
      <svg v-if="element.type === 'text'">
        <text
          ref="logoText"
          v-for="text in texts"
          :key="text.id"
          v-html="text.content"
          :font-size="text.fontSize"
          :font-family="text.fontFamily"
          dominant-baseline="text-before-edge"
        ></text>
      </svg>
    </template>
  </svg>
</template>

<style scoped>
.root-svg {
  border: 3px solid grey;
}

.main {
  outline: 3px solid green;
  width: 200px;
}
</style>
